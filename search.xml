<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>åšå®¢å»ºç«‹</title>
      <link href="/posts/1628c517.html"/>
      <url>/posts/1628c517.html</url>
      
        <content type="html"><![CDATA[<h1>åšå®¢ä¸Šçº¿</h1><p>åšå®¢ä»¥<code>hexo</code>æ¡†æ¶ä¸ºæ­å»ºåŸºç¡€ï¼›ä¸»é¢˜<a href="">Fomalhaut</a>ã€‚ å»ºç«‹è¿‡ç¨‹æ¯”è¾ƒé¡ºåˆ©ï¼Œ æ— éœ€äº‘ä¸»æœºã€‚</p><p>å»ºç«‹å‰ï¼Œæˆ‘å¹³æ—¶ç¬”è®°éƒ½è®°å½•åœ¨æœ¬åœ°<code>Typora</code>ä¸­ï¼Œæ­å»ºåšå®¢å‘¢ï¼Œè¯•æƒ³å¦‚æœèƒ½æ— ç¼å°†æœ¬åœ°ç¬”è®°å‘å¸ƒæˆçº¿ä¸Šåšå®¢å°±å¥½äº†ï¼›å»ºç«‹åˆï¼Œå°±é‡åˆ°ä¸ªé—®é¢˜ï¼š<code>hexo</code>åœ¨markdownæ’å…¥å›¾ç‰‡ä¸æ˜¾ç¤º</p><p>é—®é¢˜èƒŒæ™¯ï¼šæˆ‘æ—¥å¸¸è®°å½•ç¬”è®°ä½¿ç”¨çš„æœ¬åœ°<code>Typora</code>è½¯ä»¶ï¼Œ æ’å…¥å›¾ç‰‡ä½¿ç”¨ç›¸å¯¹è·¯å¾„<code>./images/xxx.jpg</code>(ç›¸å¯¹è·¯å¾„å¯ä»¥å¤šå¹³å°åˆ‡æ¢)ï¼Œå›¾ç‰‡å­˜åœ¨æœ¬åœ°ï¼Œ<code>hexo</code>æœ¬åœ°æ–‡æ¡£æ”¾åœ¨<code>source/_posts/</code>ç›®å½•ä¸‹ï¼Œ è€Œ<code>hexo</code>åœ¨ç”Ÿæˆé™æ€æ–‡ä»¶æ—¶é»˜è®¤ä¼šå¿½ç•¥<code>source/_posts/</code>çš„èµ„æºï¼Œå¯¼è‡´<code>public</code>ç›®å½•ä¸‹æ— å›¾ç‰‡ï¼›</p><p><img src="images/image-20240515110332814.png" alt="image-20240515110332814"></p><p>è§£å†³æ–¹æ¡ˆå‘¢ï¼š â‘  å®˜ç½‘æä¾›äº†<a href="https://hexo.io/zh-cn/docs/asset-folders">è§£å†³æ–¹æ¡ˆ</a>ï¼Œ è¯¥æ–¹æ¡ˆå‰æéœ€è¦å›¾ç‰‡æ–‡ä»¶æ”¾åœ¨åŒæ–‡æ¡£åçš„æ–‡ä»¶å¤¹ä¸‹ï¼Œ è€Œæˆ‘ä¹‹å‰ä¹ æƒ¯æ˜¯ç»Ÿä¸€æ”¾åœ¨<code>.images/</code>ä¸‹(å…·ä½“åŸå› æœ‰ğŸ˜‚æ–‡ä»¶åå¯ä»¥éšæ„ä¿®æ”¹ï¼Œæ–¹ä¾¿ç®¡ç†ï¼›æœ¬åœ°æ‰€æœ‰æ–‡æ¡£çš„å›¾ç‰‡ä¹Ÿå‡ä¸ºæ­¤è·¯å¾„ï¼Œæ›´ä¸æƒ³æ”¹ä¹ æƒ¯ğŸ˜‚)ï¼Œæ‰€ä»¥æƒ³æ–¹ä¾¿(å°±æ˜¯æ‡’)ç‚¹ï¼Œé‚æ–¹æ¡ˆâ‘ åºŸå¼ƒï¼›è¿˜æœ‰ä¸ªä¸å¯è¡ŒåŸå› æ˜¯ä¸»é¢˜<a href="">Fomalhaut</a>æ¸²æŸ“åæ–‡ä»¶åä¼šå“ˆå¸Œæˆéšæœºå­—ç¬¦ä¸²ï¼Œä½¿ç”¨æ­¤æ–¹æ¡ˆï¼Œ é™æ€æ–‡ä»¶ä¸­å›¾ç‰‡è·¯å¾„ä¸èµ„æºæ–‡ä»¶åä¸åŒ¹é…ä¾ç„¶æ— æ³•åŠ è½½ã€‚</p><p>æ–¹æ¡ˆâ‘¡ å‘¢ï¼šæˆ‘æƒ³æ˜¯ä¸æ˜¯åªè¦æŠŠ<code>source/_posts/images</code>æ–‡ä»¶æ¬åˆ°<code>public/post/images</code>ä¸‹å°±è¡Œäº†, è¯´å¹²å°±å¹²<br>ç¬¬ä¸€æ­¥ï¼Œè®©<code>_posts/images</code>åœ¨ç”Ÿæˆé™æ€æ–‡ä»¶æ—¶ä¸è¢«å¿½ç•¥ï¼Œæ ¹æ®å®˜æ–¹æ–‡æ¡£åœ¨<code>_config.yml</code>ä¸­é…ç½®</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">include:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;_posts/images/*&quot;</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ<code>hexo generate</code></p><img src="images/image-20240515112419512.png" alt="image-20240515112419512" style="zoom:80%;" /><p>åˆ°è¿™å®Œæˆäº†ç¬¬ä¸€æ­¥ï¼Œ<code>public</code>ç›®å½•ä¸‹ç”Ÿæˆçš„é™æ€æ–‡ä»¶å¤¹æ˜¯<code>posts</code>è€Œé<code>_posts</code>ğŸ˜‚ï¼Œæ¥ä¸‹æ¥æ€ä¹ˆåŠï¼Ÿçœ‹ä¸‹æºç ï¼Œè¯•ç€æ‰¾åˆ°é™æ€æ–‡ä»¶ç”Ÿæˆçš„é€»è¾‘ï¼Œç„¶åæ”¹ä¸€ä¸‹å‘¢ï¼Œè¯´å¹²å°±å¹²</p><p>2000 years laterâ€¦ ç»ˆäºåœ¨<code>./node_modules/hexo/lib/plugins/console/generate.js</code>å‘ç°äº†ç«¯å€ªï¼Œæ­¤æ–‡ä»¶ä¼šæ‰§è¡Œå†™å…¥å¹¶ç”Ÿæˆæ–‡ä»¶æ“ä½œ</p><p>åœ¨<code>wrigeFile(path)</code>å‡½æ•°ä¸­æ·»åŠ <code>path = path.replace('_posts/', 'posts/');</code>å»æ”¹å˜ä¸‹æ–‡ä»¶ç”Ÿæˆè·¯å¾„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">generateFile</span>(<span class="params">path</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> publicDir = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">public_dir</span>;</span><br><span class="line">  <span class="keyword">const</span> &#123; generatingFiles &#125; = <span class="variable language_">this</span>;</span><br><span class="line">  <span class="keyword">const</span> &#123; route, log &#125; = <span class="variable language_">this</span>.<span class="property">context</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœæ–‡ä»¶æ­£åœ¨ç”Ÿæˆåˆ™è·³è¿‡</span></span><br><span class="line">  <span class="keyword">if</span> (generatingFiles.<span class="title function_">has</span>(path)) <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Lock the file</span></span><br><span class="line">  generatingFiles.<span class="title function_">add</span>(path);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> promise;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰§è¡Œå†™å…¥æ“ä½œ</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">force</span>) &#123;</span><br><span class="line">    promise = <span class="variable language_">this</span>.<span class="title function_">writeFile</span>(path, <span class="literal">true</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> dest = <span class="title function_">join</span>(publicDir, path);</span><br><span class="line">    promise = <span class="title function_">exists</span>(dest).<span class="title function_">then</span>(<span class="function"><span class="params">exist</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!exist) <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">writeFile</span>(path, <span class="literal">true</span>);</span><br><span class="line">      <span class="keyword">if</span> (route.<span class="title function_">isModified</span>(path)) <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">writeFile</span>(path);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> promise.<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Unlock the file</span></span><br><span class="line">    generatingFiles.<span class="title function_">delete</span>(path);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="title function_">writeFile</span>(<span class="params">path, force</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; route, log &#125; = <span class="variable language_">this</span>.<span class="property">context</span>;</span><br><span class="line">  <span class="keyword">const</span> publicDir = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">public_dir</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Cache</span> = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">model</span>(<span class="string">&#x27;Cache&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> dataStream = <span class="variable language_">this</span>.<span class="title function_">wrapDataStream</span>(route.<span class="title function_">get</span>(path));</span><br><span class="line">  <span class="keyword">const</span> buffers = [];</span><br><span class="line">  <span class="keyword">const</span> hasher = <span class="title function_">createSha1Hash</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœ¨æ­¤å¤„å°† path æ›¿æ¢ &#x27;_posts/&#x27; ä¸º &#x27;posts/&#x27;, ä¸ºäº†_posts/imagesä¸‹çš„å›¾ç‰‡æ”¾åœ¨public/posts/imagesç›®å½•ä¸‹</span></span><br><span class="line">  path = path.<span class="title function_">replace</span>(<span class="string">&#x27;_posts/&#x27;</span>, <span class="string">&#x27;posts/&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> finishedPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    dataStream.<span class="title function_">once</span>(<span class="string">&#x27;error&#x27;</span>, reject);</span><br><span class="line">    dataStream.<span class="title function_">once</span>(<span class="string">&#x27;end&#x27;</span>, resolve);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Get data =&gt; Cache data =&gt; Calculate hash</span></span><br><span class="line">  dataStream.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="params">chunk</span> =&gt;</span> &#123;</span><br><span class="line">    buffers.<span class="title function_">push</span>(chunk);</span><br><span class="line">    hasher.<span class="title function_">update</span>(chunk);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> finishedPromise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> dest = <span class="title function_">join</span>(publicDir, path);</span><br><span class="line">    <span class="keyword">const</span> cacheId = <span class="string">`public/<span class="subst">$&#123;path&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">const</span> cache = <span class="title class_">Cache</span>.<span class="title function_">findById</span>(cacheId);</span><br><span class="line">    <span class="keyword">const</span> hash = hasher.<span class="title function_">digest</span>(<span class="string">&#x27;hex&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Skip generating if hash is unchanged</span></span><br><span class="line">    <span class="keyword">if</span> (!force &amp;&amp; cache &amp;&amp; cache.<span class="property">hash</span> === hash) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Save new hash to cache</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cache</span>.<span class="title function_">save</span>(&#123;</span><br><span class="line">      <span class="attr">_id</span>: cacheId,</span><br><span class="line">      hash</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="comment">// Write cache data to public folder</span></span><br><span class="line">      <span class="title function_">writeFile</span>(dest, <span class="title class_">Buffer</span>.<span class="title function_">concat</span>(buffers))).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      log.<span class="title function_">info</span>(<span class="string">&#x27;Generated: %s&#x27;</span>, <span class="title function_">magenta</span>(path));</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ”¹å®Œé‡æ–°æ‰§è¡Œgenerateå‘½ä»¤ï¼Œ æˆåŠŸç”Ÿæˆåœ¨<code>posts/images</code>ä¸‹</p><p><img src="images/image-20240515164040033.png" alt="image-20240515164040033"></p><p>é™æ€æ–‡ä»¶ä¸­å›¾ç‰‡ä¹Ÿæ˜¯ç›¸å¯¹è·¯å¾„é‚£ä¹ˆç°åœ¨å°±å¯ä»¥æˆåŠŸè®¿é—®å›¾ç‰‡äº†ğŸ˜Šã€‚</p><p>[åè®°] ï¼š ä½¿ç”¨åä¸æ—¶è¿˜æ˜¯å‘ç”Ÿäº†å›¾ç‰‡ä¸æ˜¾ç¤ºé—®é¢˜ï¼ŸğŸ§ï¼<code>hexo</code>å°†<code>md</code>æ–‡ä»¶ä¸­çš„å›¾ç‰‡è§£ææˆ<code>html</code>çš„<code>&lt;img src=&quot;&quot;&gt;</code>æ—¶ï¼Œ å±…ç„¶å‘ç”Ÿäº†å¥‡æ€ªçš„ç°è±¡ï¼Ÿï¼Ÿå¦‚ä¸‹<br><img src="images/image-20240515161711359.png" alt="image-20240515161711359"></p><p>å±…ç„¶ç”Ÿæˆ<code>src</code>è·¯å¾„æ—¶åœ¨ç›¸å¯¹å’Œç»å¯¹è·¯å¾„ä¸­æ‘‡æ‘†ä¸å®šï¼Ÿäº‹å‰å£°æ˜æˆ‘æœ¬åœ°Typoraæ–‡æ¡£ä¸­å›¾ç‰‡åªæœ‰ç›¸å¯¹è·¯å¾„<code>images/xx</code>å’Œ<code>./images/xx</code>ä¸¤ç§æƒ…å†µï¼›æŒ‰ç†æ¥è¯´ä½ è¦æ˜¯å…¨éƒ¨åŠ ä¸Š<code>/</code>æˆ‘ä¹Ÿèƒ½å¤„ç†ä¸‹ï¼Œ ä½†æ˜¯æœ‰çš„åŠ æœ‰çš„ä¸åŠ ä»€ä¹ˆæƒ…å†µï¼Ÿ</p><p>é‚£å†ä»æºç å‡ºå¤„çœ‹çœ‹ä»€ä¹ˆæƒ…å†µï¼Œåœ¨çœ‹æºç æœŸé—´åˆæƒ³åˆ°äº†ä¸ªå¥½åŠæ³•&quot;ä½ æ€ä¹ˆè§£æçš„æˆ‘ä¸ç®¡ï¼Œ è§£æå®Œåæˆ‘å¤„ç†ä¸‹ä¸ä¹Ÿå¯ä»¥å—&quot;</p><p>äºæ˜¯åœ¨<code>butterfly</code>ä¸»é¢˜åŒ…ä¸‹<code>post_lazyload.js</code>ä¸­æ³¨å†Œçš„è¿‡æ»¤å™¨å†…æ·»åŠ æ­£åˆ™æ›¿æ¢</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Butterfly</span></span><br><span class="line"><span class="comment"> * lazyload</span></span><br><span class="line"><span class="comment"> * replace src to data-lazy-src</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;log&#125; = <span class="built_in">require</span>(<span class="string">&quot;hexo/lib/plugins/helper/debug&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> urlFor = <span class="built_in">require</span>(<span class="string">&#x27;hexo-util&#x27;</span>).<span class="property">url_for</span>.<span class="title function_">bind</span>(hexo)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">lazyload</span> (htmlContent) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ‰€æœ‰çš„ &lt;img&gt; æ ‡ç­¾ï¼Œå¹¶æ›¿æ¢å…¶ä¸­çš„ src å±æ€§</span></span><br><span class="line">  <span class="keyword">let</span> processedContent = htmlContent.<span class="title function_">replace</span>(<span class="regexp">/&lt;img\s+src=[&quot;&#x27;](?:\/?\.?\/?)(\/?images\/.*?)[&quot;&#x27;]/ig</span>, <span class="string">&#x27;&lt;img src=&quot;$1&quot;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> bg = hexo.<span class="property">theme</span>.<span class="property">config</span>.<span class="property">lazyload</span>.<span class="property">placeholder</span> ? <span class="title function_">urlFor</span>(hexo.<span class="property">theme</span>.<span class="property">config</span>.<span class="property">lazyload</span>.<span class="property">placeholder</span>) : <span class="string">&#x27;data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7&#x27;</span>;</span><br><span class="line">  processedContent = processedContent.<span class="title function_">replace</span>(<span class="regexp">/(&lt;img.*? src=)/ig</span>, <span class="string">`$1 &quot;<span class="subst">$&#123;bg&#125;</span>&quot; data-lazy-src=`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> processedContent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;after_render:html&#x27;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> config = hexo.<span class="property">theme</span>.<span class="property">config</span>.<span class="property">lazyload</span></span><br><span class="line">  <span class="keyword">if</span> (!config.<span class="property">enable</span>) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">if</span> (config.<span class="property">field</span> !== <span class="string">&#x27;site&#x27;</span>) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">return</span> lazyload.<span class="title function_">call</span>(<span class="variable language_">this</span>, data)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;after_post_render&#x27;</span>, <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> config = hexo.<span class="property">theme</span>.<span class="property">config</span>.<span class="property">lazyload</span></span><br><span class="line">  <span class="keyword">if</span> (!config.<span class="property">enable</span>) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">if</span> (config.<span class="property">field</span> !== <span class="string">&#x27;post&#x27;</span>) <span class="keyword">return</span></span><br><span class="line">  data.<span class="property">content</span> = lazyload.<span class="title function_">call</span>(<span class="variable language_">this</span>, data.<span class="property">content</span>)</span><br><span class="line">  <span class="keyword">return</span> data</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é‡æ–°ç”Ÿæˆ<br><img src="images/image-20240515163420934.png" alt="image-20240515163420934"><br>çœ‹å›¾ç‰‡è·¯å¾„å·²å…¨éƒ¨å˜æˆç›¸å¯¹è·¯å¾„, å¤§åŠŸå‘Šæˆ</p><p>ç°åœ¨å‘¢ï¼Œ æˆ‘å°±å®ç°äº†å°†æœ¬åœ°ç¬”è®°å¯ç›´æ¥å‘å¸ƒæˆåšå®¢çš„æ–¹æ¡ˆï¼Œ è€Œä¸éœ€è¦ä¿®æ”¹ä»€ä¹ˆã€‚</p><p>æ–¹æ¡ˆâ‘¢å‘¢ï¼Œ ä½¿ç”¨å›¾åºŠï¼Œä½†æ˜¯æˆ‘æ—¥å¸¸ä¹ æƒ¯è¿˜æ˜¯æœ¬åœ°<code>Typora</code>è®°å½•ï¼Œæ— ç½‘ç»œé™åˆ¶ï¼Œé‚æš‚ä¸é‡‡ç”¨</p><h1>æœªæ¥å±•æœ›</h1><p><img src="images/image-20240514180751428.png" alt="future"></p><p>åœ¨ä¹‹å‰çš„å·¥ä½œä¸­ï¼Œä¹Ÿæœ‰è®°å½•çš„ä¹ æƒ¯ï¼Œé‡åˆ°äº›æŠ€æœ¯éš¾ç‚¹æˆ–çº¿ä¸Šé—®é¢˜ç­‰ç–‘éš¾æ‚ç—‡ä¼šåœ¨æœ¬åœ°<code>Typora</code>ä¸­è®°å½•ï¼Œä¸è¿‡å‘¢ç›®çš„æ˜¯ç»™è‡ªå·±çœ‹ğŸ˜‚;  å»ºç«‹åšå®¢å‘¢ï¼Œä¸€æ–¹é¢ç£ä¿ƒè‡ªå·±ï¼Œå­¦æ— æ­¢å¢ƒï¼›å¦ä¸€æ–¹é¢ä»¥å‰ä¹Ÿä»å¾ˆå¤šäººçš„åšå®¢ä¸­å—åˆ°å¸®åŠ©ï¼Œæ‰€ä»¥å­¦ä¼šåˆ†äº«ï¼Œå½¢æˆé—­ç¯ã€‚</p><p>æœªæ¥ï¼Œæˆ‘ä¼šæœ¬åœ°è®°å½•ä¸­æŒ‘é€‰å†™æœ‰ä»·å€¼çš„æ–‡ç« æ•´ç†åå‘å¸ƒ(ğŸ˜‚ä»¥å‰æ˜¯è®©è‡ªå·±çœ‹æ‡‚ï¼Œåšå®¢è¦èƒ½è®©åˆ«äººçœ‹æ‡‚)ï¼Œå¹¶ä¸”åœ¨å­¦ä¹ ä¸€äº›æ–°æŠ€æœ¯å¹¶æœ‰æ·±åˆ»æ”¶è·åä¹Ÿåœ¨æ­¤è®°å½•ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
